@import "variables";
@import "mixins";

// --------------------------------------------------
// CUSTOM MIXINS / PLACEHOLDERS
// --------------------------------------------------
// We add our own transition helper so that we don't rely on the existing
// (argument-less) `transition` mixin that comes from the legacy code-base.
// Usage: @include fx-transition(property, duration, easing);
@mixin fx-transition($properties: all, $duration: .3s, $timing: ease-in-out) {
  transition: $properties $duration $timing;
}

%card {
  background: $dark-card-bg;
  border: 1px solid $dark-border;
  border-radius: $border-radius-base;
  @include soft-shadow;
}

%button {
  font-size: .85rem;
  padding: .5rem 1rem;
  border-radius: $border-radius-base;
  border: 1px solid $accent;
  color: $accent;
  background: transparent;
  cursor: pointer;
  @include fx-transition(all, .25s);

  &:hover {
    background: $accent;
    color: #fff;
    box-shadow: 0 0 10px rgba($accent, .6);
  }
}

// --------------------------------------------------
// GLOBAL ELEMENTS
// --------------------------------------------------
body {
  background-color: $dark-bg;
  color: $font-color;
  font-family: 'Segoe UI', sans-serif;
  margin: 0;
}

nav {
  @extend %card;
  padding: $base-spacing;
  display: flex;
  align-items: center;

  a {
    color: $font-color;
    text-decoration: none;
    margin-right: $base-spacing;
    @include fx-transition();

    &:hover,
    &.active {
      color: $accent;
    }

    &.active {
      font-weight: 600;
      border-bottom: 2px solid $accent;
    }
  }

  .nav-actions { margin-left: auto; }
}

hr {
  border: none;
  border-bottom: 1px solid $dark-border;
  margin: 0;
}

// --------------------------------------------------
// COURSE LIST & DETAILS
// --------------------------------------------------
.course-list {
  display: flex;
  flex-wrap: wrap;
  gap: $base-spacing;
  padding: $base-spacing;

  .course {
    @extend %card;
    background: linear-gradient(145deg, #1c1c1c, #202020);
    width: 260px;
    cursor: pointer;
    @include fx-transition();

    &:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba($accent, 0.25);
    }

    h3 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      color: $accent;
    }

    p {
      font-size: 0.95rem;
      color: $font-color-muted;
    }
  }
}

.course-detail-container {
  @extend %card;
  width: 100%;
  margin: 2rem auto;
  padding: 2rem;

  h2 { color: $accent; margin-bottom: 1rem; }

  ul {
    list-style: none;
    padding: 0;

    li {
      margin-bottom: 0.5rem;
      padding: 0.75rem 1rem;
      @extend %card;
      background-color: #1e1e1e;
    }
  }

  p { color: $font-color-muted; }
}

// --------------------------------------------------
// LESSONS
// --------------------------------------------------
.lessons-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
  gap: $base-spacing * 1.25;
  padding: 0;
}

.lesson-card {
  --blur: 14px;
  @extend %card;
  display: flex;
  align-items: center;
  gap: 1.75rem;
  padding: 1.75rem 2rem;
  width: 100%;
  backdrop-filter: blur(var(--blur));
  border: 1px solid rgba($accent, .15);
  animation: fadeInUp .6s ease-out forwards;
  animation-delay: var(--delay);
  @include fx-transition();

  &:hover { transform: translateY(-6px) scale(1.02); }
}

// --------------------------------------------------
// PROGRESS CIRCLE
// --------------------------------------------------
.progress-circle {
  --size: 90px;
  width: var(--size);
  height: var(--size);
  position: relative;
  flex-shrink: 0;

  svg { width: 100%; height: 100%; transform: rotate(-90deg); }
  circle { fill: none; stroke-width: 4.2; }
  .track { stroke: rgba(255, 255, 255, .1); }

  .indicator {
    stroke: $accent;
    stroke-linecap: round;
    stroke-dasharray: 100 100;
    stroke-dashoffset: var(--offset);
    animation: fillRing 1.2s ease-out forwards, glowPulse 2.4s ease-in-out infinite 1.2s;
    filter: drop-shadow(0 0 6px rgba($accent, .75));
  }

  .percent {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    font-weight: 600;
    color: $font-color;
  }
}

// --------------------------------------------------
// INFO + ACTIONS
// --------------------------------------------------
.info {
  flex: 1 1 auto;
  h4 { margin: 0 0 .5rem; font-size: 1.25rem; color: $accent; }
  p  { margin: 0 0 1rem; font-size: .95rem; color: $font-color-muted; }

  .actions { display: flex; flex-wrap: wrap; gap: .6rem; button { @extend %button; } }
}

// --------------------------------------------------
// TOP-FIVE BOARD
// --------------------------------------------------
.top-five-list {
  @extend %card;
  width: 100%;
  padding: $base-spacing * 1.5;
  backdrop-filter: blur(10px);

  h3 { margin: 0 0 1rem; font-size: 1.3rem; color: $accent; }

  .user-card {
    @extend %card;
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 0.8rem;
    padding: 0.75rem;
    background: rgba(255, 255, 255, 0.03);
    @include fx-transition();

    &:hover { background: rgba(255, 255, 255, 0.06); transform: translateX(6px); }

    .avatar {
      position: relative; flex-shrink: 0;
      img { width: 56px; height: 56px; border-radius: 50%; border: 2px solid $accent; }
      .rank { position: absolute; bottom: -6px; right: -6px; background: $accent; color: #fff; font-size: .75rem; font-weight: 600; padding: 0 6px; border-radius: 4px; }
    }

    .user-info { display: flex; flex-direction: column; .name { font-size: 1rem; } .score { font-size: .9rem; color: $font-color-muted; } }
  }
}

// --------------------------------------------------
// BUTTONS
// --------------------------------------------------
button.btn-success,
.just-button { @extend %button; }

button.btn-success {
  background: $accent; color: #fff;
  &:hover  { transform: translateY(-3px); }
  &:active { transform: translateY(-1px); opacity: .9; }
}

// Gradient version inside assignments
.assignments-list .just-button {
  background: linear-gradient(135deg, #4c85ff 0%, #6d5cff 100%);
  color: #fff;
  @include fx-transition(opacity, .15s);
  &:disabled { opacity: .45; cursor: default; }
}

// --------------------------------------------------
// MODALS
// --------------------------------------------------
.modal-backdrop { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); opacity: 0; animation: fadeInBg $transition-speed forwards; }
.modal-dialog   { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -60%); opacity: 0; animation: slideDown $transition-speed forwards; width: 100%; max-width: 500px; }

.modal-content { @extend %card; overflow: hidden; }
.modal-header, .modal-footer { padding: $base-spacing; border-bottom: 1px solid $dark-border; }
.modal-footer { border-top: 1px solid $dark-border; display: flex; justify-content: flex-end; }
.modal-body   { padding: $base-spacing; }
.modal-title  { color: $font-color; margin: 0; }

.btn-close { background: transparent; border: none; font-size: 1.25rem; color: $font-color-muted; @include fx-transition(); &:hover { color: $font-color; } }

// --------------------------------------------------
// SIDEBAR & ASSIGNMENTS
// --------------------------------------------------
.sidebar { @extend %card; position: sticky; top: 80px; padding: $base-spacing; }

.assignment-links { list-style: none; padding: 0; margin: 0; li { margin-bottom: $base-spacing / 2; } }

.assignments-list {
  display: flex; flex-direction: column; gap: 2rem;
  > div { @extend %card; background: #1e1f22; border: 1px solid #2c2d31; padding: 1.25rem; }
  h3    { margin: 0 0 0.75rem; font-size: 1.2rem; color: #e6e6e6; }
  .editor {
    width: 100%; min-height: 12rem; resize: vertical; padding: 0.75rem 1rem; border: 1px solid #444; border-radius: 6px; background: #0d0e11; color: #e0e0e0; font-family: 'Fira Code', monospace; line-height: 1.35; margin-bottom: 0.75rem;
    &:focus { outline: 2px solid #4c85ff; outline-offset: -1px; }
  }
}

// --------------------------------------------------
// ANIMATIONS
// --------------------------------------------------
// --------------------------------------------------
// ASSIGNMENTS LIST BUTTONS
// --------------------------------------------------
.assignments-list .just-button {
  background: linear-gradient(135deg, #4c85ff 0%, #6d5cff 100%);
  color: #fff;
  @include fx-transition(opacity, .15s);
  &:disabled { opacity: .45; cursor: default; }
}

// добавляем стили для «мусорного ведра»
.assignments-list .trash-button {
  background: transparent;
  border: none;
  padding: $base-spacing / 2;
  margin-left: $base-spacing / 2;
  font-size: 1.2rem;
  color: $danger;               // из твоих переменных, например $danger: #e74c3c;
  cursor: pointer;
  //@include fx-transition(background, .2s); fx-transition(opacity, .15s);

  &:hover {
    background: rgba($danger, 0.1);
  }
  &:active {
    opacity: .9;
  }
}

@keyframes fillRing { 0% { stroke-dashoffset: 100;} 100% { stroke-dashoffset: var(--offset);} }
@keyframes glowPulse { 0%,100% { box-shadow: 0 0 12px rgba($accent, .55);} 50% { box-shadow: 0 0 20px rgba($accent, .85);} }
@keyframes fadeInBg { from { opacity: 0;} to { opacity: 1;} }
@keyframes slideDown { from { transform: translate(-50%, -60%); opacity: 0;} to { transform: translate(-50%, -50%); opacity: 1;} }


